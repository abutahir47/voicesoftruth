<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Panel - Voices of Truth</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen flex flex-col items-center p-6">
  <div class="w-full max-w-3xl bg-white rounded-lg shadow-md p-8 space-y-8">
    <h1 class="text-3xl font-bold text-center">Admin Panel</h1>
    <!-- ... [All your form fields here, as in your original code] ... -->
    <!-- For brevity, only a few fields are shown, add the rest as needed -->
    <section>
      <h2 class="text-xl font-semibold mb-4 border-b pb-2">Home Page Hero Section</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="homeHeroTitle" class="block font-medium mb-1">Hero Title (English)</label>
          <input type="text" id="homeHeroTitle" class="w-full border rounded px-3 py-2" />
        </div>
        <div>
          <label for="homeHeroTitleAr" class="block font-medium mb-1">Hero Title (Arabic)</label>
          <input type="text" id="homeHeroTitleAr" class="w-full border rounded px-3 py-2" />
        </div>
        <!-- Add the rest of your fields as in your original code -->
      </div>
    </section>
    <!-- ...Repeat for other sections... -->

    <button onclick="saveContent()" class="bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-3 rounded shadow transition-colors w-full mt-6">
      Save
    </button>
    <button onclick="exportContentAsJSON()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded shadow transition-colors w-full mt-2 mb-4">
      Export JSON
    </button>
    <button onclick="pushContentToGitHub()" class="bg-purple-600 hover:bg-purple-700 text-white font-semibold px-6 py-3 rounded shadow transition-colors w-full mt-2 mb-4">
      Push to GitHub
    </button>
  </div>

  <script>
    function loadContent() {
      const data = JSON.parse(localStorage.getItem('siteContent')) || {
        home: {
          hero: {
            title: '', titleAr: '',
            subtitle: '', subtitleAr: '',
            bg: '', position: '',
            height: '', heightMobile: ''
          },
          videos: [
            { title: '', url: '' },
            { title: '', url: '' },
            { title: '', url: '' }
          ]
        },
        whoWeAre: { videoUrl: '' },
        whatWeDo: {
          heroTitle: '', heroTitleAr: '',
          heroSubtitle: '', heroSubtitleAr: '',
          heroBg: '', heroPosition: '',
          heroHeight: '', heroHeightMobile: '',
          mainText: '', mainTextAr: ''
        },
        getInvolved: {
          heroTitle: '', heroTitleAr: '',
          heroSubtitle: '', heroSubtitleAr: '',
          heroBg: '', heroPosition: '',
          heroHeight: '', heroHeightMobile: '',
          mainText: '', mainTextAr: ''
        }
      };

      // Home hero
      document.getElementById('homeHeroTitle').value = data.home.hero.title;
      document.getElementById('homeHeroTitleAr').value = data.home.hero.titleAr;
      // ...repeat for all other fields as in your original code...
    }

    function saveContent() {
      const data = {
        home: {
          hero: {
            title: document.getElementById('homeHeroTitle').value,
            titleAr: document.getElementById('homeHeroTitleAr').value,
            subtitle: document.getElementById('homeHeroSubtitle')?.value || '',
            subtitleAr: document.getElementById('homeHeroSubtitleAr')?.value || '',
            bg: document.getElementById('homeHeroBg')?.value || '',
            position: document.getElementById('homeHeroPosition')?.value || '',
            height: document.getElementById('homeHeroHeight')?.value || '',
            heightMobile: document.getElementById('homeHeroHeightMobile')?.value || ''
          },
          videos: [
            {
              title: document.getElementById('homeVideo1Title')?.value || '',
              url: document.getElementById('homeVideo1Url')?.value || ''
            },
            {
              title: document.getElementById('homeVideo2Title')?.value || '',
              url: document.getElementById('homeVideo2Url')?.value || ''
            },
            {
              title: document.getElementById('homeVideo3Title')?.value || '',
              url: document.getElementById('homeVideo3Url')?.value || ''
            }
          ]
        },
        whoWeAre: {
          videoUrl: document.getElementById('whoVideoUrl')?.value || ''
        },
        whatWeDo: {
          heroTitle: document.getElementById('whatHeroTitle')?.value || '',
          heroTitleAr: document.getElementById('whatHeroTitleAr')?.value || '',
          heroSubtitle: document.getElementById('whatHeroSubtitle')?.value || '',
          heroSubtitleAr: document.getElementById('whatHeroSubtitleAr')?.value || '',
          heroBg: document.getElementById('whatHeroBg')?.value || '',
          heroPosition: document.getElementById('whatHeroPosition')?.value || '',
          heroHeight: document.getElementById('whatHeroHeight')?.value || '',
          heroHeightMobile: document.getElementById('whatHeroHeightMobile')?.value || '',
          mainText: document.getElementById('whatMainText')?.value || '',
          mainTextAr: document.getElementById('whatMainTextAr')?.value || ''
        },
        getInvolved: {
          heroTitle: document.getElementById('involvedHeroTitle')?.value || '',
          heroTitleAr: document.getElementById('involvedHeroTitleAr')?.value || '',
          heroSubtitle: document.getElementById('involvedHeroSubtitle')?.value || '',
          heroSubtitleAr: document.getElementById('involvedHeroSubtitleAr')?.value || '',
          heroBg: document.getElementById('involvedHeroBg')?.value || '',
          heroPosition: document.getElementById('involvedHeroPosition')?.value || '',
          heroHeight: document.getElementById('involvedHeroHeight')?.value || '',
          heroHeightMobile: document.getElementById('involvedHeroHeightMobile')?.value || '',
          mainText: document.getElementById('involvedMainText')?.value || '',
          mainTextAr: document.getElementById('involvedMainTextAr')?.value || ''
        }
      };
      localStorage.setItem('siteContent', JSON.stringify(data));
      alert('Content saved locally!');
    }

    function exportContentAsJSON() {
      const data = localStorage.getItem('siteContent');
      if (!data) {
        alert('No content to export.');
        return;
      }
      const blob = new Blob([data], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'siteContent.json';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    async function pushContentToGitHub() {
      const data = JSON.parse(localStorage.getItem('siteContent'));
      if (!data) {
        alert('No content to push. Please save first.');
        return;
      }
      try {
        const response = await fetch('/.netlify/functions/updateSiteContent', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ content: data })
        });
        if (response.ok) {
          alert('siteContent.json updated on GitHub!');
        } else {
          const error = await response.text();
          alert('Error updating file: ' + error);
        }
      } catch (err) {
        alert('Network error: ' + err.message);
      }
    }

    window.onload = loadContent;
  </script>
</body>
</html>
